buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath 'com.github.jruby-gradle:jruby-gradle-plugin:0.4.0'
    }
}

apply plugin: 'java'
apply plugin: 'com.github.jruby-gradle.base'
import com.github.jrubygradle.JRubyExec

dependencies {
    jrubyExec 'rubygems:rspec:2.99.0+'
}

task spec(type: JRubyExec) {
    group 'Verification'
    description 'Run the RSpecs for this project'
    dependsOn classes
    classpath sourceSets.main.runtimeClasspath
    jrubyArgs '-S'
    script 'rspec'
    scriptArgs '--order', 'random', '--color'
}
/* let's make our top-level check task run RSpec too */
check.dependsOn spec
